# vim:set foldmethod=marker foldlevel=0:
# source-file memo/dotfiles/tmux.conf

# 一般{{{
# ビープ音を消す
set -g bell-action none
# ビジュアルベルを消す
set -g visual-bell off
# }}}
# 表示{{{
set-option -g default-terminal "screen-256color"
set-option -g terminal-overrides "xterm:colors=256color"
# set-option -g default-terminal tmux-256color
# # ステータスバーの色を設定する

set -g status-style fg=white,bg=black
setw -g window-status-style fg=cyan,bg=default
#,attr=dim
setw -g window-status-current-style fg=white,bg=red
#,attr=bright

## アクティブなペインのみ白っぽく変更（真っ黒は232）
## 思ったほど便利ではなかったので一時コメントアウト
# set -g window-style 'bg=colour239'
# set -g window-active-style 'bg=colour234'

# プレフィクスが押されているときに色を反転(参考: https://codeday.me/jp/qa/20190220/291683.html)
set-option -g status-right '#[fg=cyan,bg=#303030]#{?client_prefix,#[reverse],} #H[#S] #[default]'
# }}}
# 操作設定{{{
set -s escape-time 0

# コピーをクリップボードに入れる。(xsel必要)https://qiita.com/purutane/items/1d1dc4818013bbbaead4
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xsel -bi"set-window-option -g mode-keys vi
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xsel -bi"
# }}}
# キー設定{{{
# Ctrl + sでもプレフィクスキーとして有効にする。うまく動かない
set-option -g prefix2 C-s
set-window-option -g mode-keys vi
bind c new-window -c '#{pane_current_path}'
bind '"' split-window -c '#{pane_current_path}'
bind % split-window -h -c '#{pane_current_path}'

# 参考: https://qiita.com/b4b4r07/items/01359e8a3066d1c37edc
# Prefix+hjkl でペイン移動
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
# bind-key -n M-h select-pane -L
# bind-key -n M-j select-pane -D
# bind-key -n M-k select-pane -U
# bind-key -n M-l select-pane -R

# ペインサイズを上下左右（Prefix+JKHL）に変更
# Prefix+J,J,J,J,...と連打してリサイズ可能
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5
# bind-key -c M-H resize-pane -L 5
# bind-key -c M-J resize-pane -D 5
# bind-key -c M-K resize-pane -U 5
# bind-key -c M-L resize-pane -R 5

# Prefix+- で横に、Prefix+| で縦に分割（ペイン）する
bind-key | split-window -h
bind-key - split-window -v
bind-key v split-window -h -c '#{pane_current_path}'
bind-key s split-window -v -c '#{pane_current_path}'

# Prefix+^で直前のウィンドウへ。うまく行かなかった
bind-key ^ last-window
bind-key -n M-^ last-window

# bind-key -n M-v split-window -h
# bind-key -n M-s split-window -v
# bind-key -n M-c new-window -c "#{pane_current_path}"
# bind-key -n M-p previous-window
# bind-key -n M-n next-window

# Prefix+rで設定をリロード
bind r source-file ~/.tmux.conf
# }}}
